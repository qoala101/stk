<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(OnChartsLoaded);

    function OnChartsLoaded() {
      $.ajax({
        url: "http://localhost:6506/api/candlestick_chart_data"
      }).done(OnCandlesticksResponseReceived);

      $.ajax({
        url: "http://localhost:6506/api/order_proxy/order"
      }).done(OnStrategyResponseReceived);
    }

    function OnCandlesticksResponseReceived(response) {
      var data = new google.visualization.DataTable(response);

      var options = {
        title: "ETHUSDT",
        vAxis: { title: "Price, USDT" },
        hAxis: { title: "Date" },
        series: [{ type: "candlesticks" }, { type: "line", curveType: "function" }, { type: "line" }],
        height: 800
      };

      var candlesticks_chart = new google.visualization.ComboChart(document.getElementById('candlesticks_chart_div'));
      candlesticks_chart.draw(data, options);
    }

    function OnStrategyResponseReceived(response) {
      var data = new google.visualization.DataTable(response);

      var options = {
        title: "ETHUSDT",
        hAxis: { title: "Date" },
        series: {
          0: { type: "area", targetAxisIndex: 0 },
          1: { type: "area", targetAxisIndex: 1 }
        },
        vAxes: {
          0: {
            title: 'AAA'
          },
          1: {
            title: 'BBB'
          }
        },
        height: 800
      };

      var strategy_chart = new google.visualization.ComboChart(document.getElementById('strategy_chart_div'));
      strategy_chart.draw(data, options);
    }

  </script>
</head>

<body>
  <div id="candlesticks_chart_div"></div>
  <div id="strategy_chart_div"></div>
</body>

</html>